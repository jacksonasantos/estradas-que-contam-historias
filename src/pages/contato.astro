---
import BaseLayout from "../layouts/BaseLayout.astro";
const FORMSPREE_URL = "https://formspree.io/f/xwkzqgqv"; // substitua pelo seu endpoint Formspree

let enviado = false;
let erro = "";

if (Astro.request.method === "POST") {
  const formData = await Astro.request.formData();
  const nome = formData.get("nome");
  const email = formData.get("email");
  const mensagem = formData.get("mensagem");

  const res = await fetch(FORMSPREE_URL, {
    method: "POST",
    headers: { "Accept": "application/json" },
    body: JSON.stringify({
      name: nome,
      email,
      message: mensagem,
      _replyto: "jackson_a_santos@hotmail.com"
    })
  });

  if (res.ok) {
    enviado = true;
  } else {
    erro = "Não foi possível enviar sua mensagem. Tente novamente.";
  }
}
---

<BaseLayout>

  <!-- Introdução -->
  <section class="px-6 md:px-20 py-32 max-w-4xl">
    <h1 class="text-4xl md:text-5xl font-serif mb-8">
      Vamos conversar?
    </h1>

    <p class="text-xl text-neutral-400 leading-relaxed">
      Algumas viagens começam com uma pergunta simples.
      Se você sente que um caminho está te chamando,
      este é o lugar para começar.
    </p>
    <div class="flex gap-4 mt-8">
      <a href="https://wa.me/5551999999999" target="_blank" rel="noopener" class="flex items-center gap-2 text-green-400 hover:underline">
        <img src="/whatsapp.svg" alt="WhatsApp" width="36" height="36" class="inline-block" style="filter: invert(52%) sepia(92%) saturate(747%) hue-rotate(84deg) brightness(95%) contrast(92%);" />
      </a>
      <a href="https://instagram.com/seuusuario" target="_blank" rel="noopener" class="flex items-center gap-2 text-pink-400 hover:underline">
        <img src="/instagram.svg" alt="Instagram" width="36" height="36" class="inline-block" style="filter: invert(48%) sepia(99%) saturate(7492%) hue-rotate(295deg) brightness(97%) contrast(112%);" />
      </a>
      <a href="mailto:jackson_a_santos@hotmail.com" target="_blank" rel="noopener" class="flex items-center gap-2 text-blue-400 hover:underline">
        <img src="/email.svg" alt="Email" width="36" height="36" class="inline-block" />
      </a>
    </div>
  </section>

  <!-- Fechamento -->
  <section class="px-6 md:px-20 py-24 max-w-4xl">
    <p class="text-neutral-400 font-serif text-lg">
      Não existe pergunta errada.
      Toda boa viagem começa com curiosidade.
    </p>
  </section>

</BaseLayout>
