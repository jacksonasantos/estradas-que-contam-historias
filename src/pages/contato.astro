---
import BaseLayout from "../layouts/BaseLayout.astro";
const FORMSPREE_URL = "https://formspree.io/f/xwkzqgqv"; // substitua pelo seu endpoint Formspree

let enviado = false;
let erro = "";

if (Astro.request.method === "POST") {
  const formData = await Astro.request.formData();
  const nome = formData.get("nome");
  const email = formData.get("email");
  const mensagem = formData.get("mensagem");

  const res = await fetch(FORMSPREE_URL, {
    method: "POST",
    headers: { "Accept": "application/json" },
    body: JSON.stringify({
      name: nome,
      email,
      message: mensagem,
      _replyto: "jackson_a_santos@hotmail.com"
    })
  });

  if (res.ok) {
    enviado = true;
  } else {
    erro = "Não foi possível enviar sua mensagem. Tente novamente.";
  }
}
---

<BaseLayout>

  <!-- Cabeçalho -->
  <section class="px-6 md:px-20 py-12 max-w-9xl relative">
    <div>
      <div class="flex items-center mb-4">
        <h1 class="text-5xl font-serif mb-0">Vamos conversar?</h1>
      </div>
      <p class="text-neutral-400 max-w-2xl text-lg">
        Algumas viagens começam com uma pergunta simples.
        Se você sente que um caminho está te chamando,
        este é o lugar para começar.
      </p>
    </div>
    <a
      href="#"
      onclick="history.back(); return false;"
      class="absolute right-6 md:right-20 top-12 flex items-center gap-2 border border-neutral-700 px-4 py-2 rounded-full hover:border-neutral-400 hover:text-white transition text-base"
      style="z-index:10;"
    >
      ←<span class="hidden md:inline"> Voltar</span>
    </a>
  </section>

  <section class="px-6 md:px-20 pb-16">
    <div class="flex gap-4 mt-8">
      <a href="https://instagram.com/estradasquecontamhistorias" target="_blank" rel="noopener" class="flex items-center gap-2">
        <img src="/assets/instagram.svg" alt="Instagram" width="36" height="36" class="inline-block"/>
      </a>
      <a href="https://www.facebook.com/profile.php?id=61588286666666&sk=about" target="_blank" rel="noopener" class="hover:underline flex items-center gap-2">
        <img src="/assets/facebook.svg" alt="Facebook" width="36" height="36" class="inline-block" />
      </a>
      <a href="https://wa.me/555137375398" target="_blank" rel="noopener" class="flex items-center gap-2">
        <img src="/assets/whatsapp.svg" alt="WhatsApp" width="36" height="36" class="inline-block" />
      </a>
      <a href="mailto:estradas.que.contam.historias@hotmail.com?subject=Contato%20-%20Estradas%20que%20Contam%20Histórias" target="_blank" rel="noopener" class="hover:underline flex items-center gap-2">
        <img src="/assets/email.svg" alt="Email" width="36" height="36" class="inline-block" />
      </a>
    </div>
  </section>

  <!-- Fechamento -->
  <section class="px-6 md:px-20 py-24 max-w-4xl">
    <p class="text-neutral-400 font-serif text-lg">
      Não existe pergunta errada.
      Toda boa viagem começa com curiosidade.
    </p>
  </section>

</BaseLayout>
